[Youtube Clone Coding]

1. nodejs ì„¤ì¹˜(ê·¸ëƒ¥ next)

2. npm ì„¤ì¹˜(on vscode)

3. í”„ë¡œì íŠ¸ í´ë” ìƒì„±(YoutubeClone)

4. package.json íŒŒì¼ ìƒì„±
	(1) githubì— repo ìƒì„±(https://github.com/Sangreal2021/wetube-reloaded.git)
	(2) vscode í„°ë¯¸ë„ì—ì„œ 
		1) git init
		2) git remote add origin https://github.com/Sangreal2021/wetube-reloaded.git
		â€» í˜¹ì‹œ main branchê°€ ì•ˆì¡íˆë©´ git pull origin mainìœ¼ë¡œ ë¸Œëœì¹˜ ìƒì„±.
		3) npm init ìœ¼ë¡œ ì•„ë˜ì²˜ëŸ¼ package.json ìë™ ìƒì„±

		{
		  "name": "wetube-reloaded",
		  "version": "1.0.0",
		  "description": "The best way to watch videos",
		  "main": "index.js",
		  "repository": {
			"type": "git",
			"url": "(https://github.com/Sangreal2021/wetube-reloaded.git)"
		  },
		  "scripts": {
			"win": "node index.js"
		  },
		  "author": "Ham ilwoo<hiw051515@gmail.com>",
		  "license": "MIT",
		  "bugs": {
			"url": "https://github.com/Sangreal2021/wetube-reloaded.git"
		  },
		  "homepage": "https://github.com/Sangreal2021/wetube-reloaded.git"
		}

5. í„°ë¯¸ë„ì—ì„œ ì‹¤í–‰(ë°˜ë“œì‹œ package.jsonì´ ìˆëŠ” ê³³ì—ì„œ í•´ì•¼í•¨)
	npm run win -> winì´ë¼ëŠ” ìŠ¤í¬ë¦½íŠ¸ë¥¼ ì‹¤í–‰
	
6. ì„œë²„ ë§Œë“¤ê¸°(i : install)
	1) npm i express -> í´ë”ì— ìë™ìœ¼ë¡œ module ë° lockíŒŒì¼ ìƒì„±
	2) moduleê³¼ lock íŒŒì¼ì€ ì‚­ì œ, package.jsonì— dependenciesë§Œ ìë™ì¶”ê°€ëœ ìƒíƒœ.
	3) npm i -> package.jsonì— ìˆëŠ” dependenciesë§Œ ë³´ê³  ë‹¤ì‹œ moduleê³¼ lockíŒŒì¼ì„ ìƒì„±.
	ì¦‰, í”„ë¡œì íŠ¸ ê³µìœ ì‹œ package.jsonê³¼ index.jsë§Œ ë³´ë‚´ë©´ ë¨!
	
7. https://babeljs.io/ : javascript ì»´íŒŒì¼ëŸ¬
	ìµœì‹  JSì–¸ì–´ë¥¼ ì•ˆì •ì ì¸ êµ¬ë²„ì „ ì–¸ì–´ë¡œ ë³€í™˜(nodeJSê°€ ì´í•´í• ìˆ˜ ìˆë„ë¡)
	1) ì„¤ì¹˜ : npm install --save-dev @babel/core
	2) package.jsonì— devDependencies ì¶”ê°€ë¨, ê·¸ë¦¬ê³  ë‹¹ì—°íˆ node_modulesì— ì„¤ì¹˜ë¨
	3) babel.config.json íŒŒì¼ ìƒì„±
		{
			"presets": ["@babel/preset-env"]
		}
	4) babel/preset ì„¤ì¹˜
		npm install @babel/preset-env --save-dev
			-> package.jsonì— devDependenciesì— ì¶”ê°€ë¨
		â€» presets : ì—„ì²­ í° babelì„ ìœ„í•œ í”ŒëŸ¬ê·¸ì¸ ex)preset-env
	5) babel/node ì„¤ì¹˜
		npm install @babel/node --save-dev
	6) package.jsonì—ì„œ scriptë¥¼ devë¡œ ë³€ê²½
		  "scripts": {
			"dev": "babel-node index.js"
		  },
	7) index.js ìˆ˜ì •
		// console.log("Hello NodejS");
		// const express = require("express");
		import express from "express"; // ìœ„ë³´ë‹¤ ë” ìµœì‹  ë¬¸ë²•

		// const app = express();

		console.log("Hi~");
		
		-> npm run dev
	8) nodemon ì„¤ì¹˜ : íŒŒì¼ ìˆ˜ì •ë˜ë©´ ì•Œì•„ì„œ ë³€ê²½ ì¬ì‹œì‘ í•´ì¤Œ
		npm install nodemon --save-dev
		package.jsonì—ì„œ ìˆ˜ì •
		  "scripts": {
			"dev": "nodemon --exec babel-node index.js"
		  },
		
		-> npm run dev ì‹¤í–‰í•˜ë©´ ì½˜ì†” ì¢…ë£Œì•ˆë˜ê³ , index.jsë¥¼ ìˆ˜ì •í•˜ê³  ì €ì¥ì‹œ ë°”ë¡œ ë°˜ì˜ë¨
		   npm run devë¥¼ ë§¤ë²ˆ ì‹¤í–‰í•  í•„ìš”X
	
	â€» node index.js -> babel-node index.js -> nodemon --exec babel-node index.js
	
	9) src í´ë” ë§Œë“¤ê³  index.js ê°™ì€ íŒŒì¼ ì´ë™
		package.jsonì—ì„œ ì•„ë˜ì²˜ëŸ¼ ê²½ë¡œìˆ˜ì •
		  "scripts": {
			"dev": "nodemon --exec babel-node src/index.js"
		  },
		-> npm run dev
		
		index.js -> server.jsë¡œ ë³€ê²½ í›„ package.json ë‚´ index íŒŒì¼ëª… ë³€ê²½
		
		server.jsì— ì•„ë˜ ë‚´ìš© ì‘ì„±
		
		import express from "express";
		// create application
		const PORT = 4000;
		const app = express();

		// application ì„¤ì •
		const handleHome = () => console.log("Somebody is trying to go home.");
		app.get("/", handleHome);


		// ì™¸ë¶€ ì ‘ì† listen
		const handleListening = () => console.log(`âœ… Server listening on port http://localhost:${PORT} ğŸ¶`);
		app.listen(PORT, handleListening);
		
	10) req, res
		: ë¸Œë¼ìš°ì €ë¡œë¶€í„° / get requestë¥¼ ë°›ì•„ì„œ res.send("I still hate you");ë¡œ ë³´ë‚´ê³  ì¢…ë£Œ.
		
		import express from "express";
		// create application
		const PORT = 4000;
		const app = express();
----------------------------------------------------------------------------------------------------------------
		// application ì„¤ì •
		const handleHome = (req, res) => {
			// console.log(res);
			// return res.end(); // ì„œë²„ê°€ responseë¥¼ ëëƒ„
			return res.send("I still hate you!");
		}
		app.get("/", handleHome);


		// ì™¸ë¶€ ì ‘ì† listen
		const handleListening = () => console.log(`âœ… Server listening on port http://localhost:${PORT} ğŸ¶`);
		app.listen(PORT, handleListening);
		
----------------------------------------------------------------------------------------------------------------
		// application ì„¤ì •
		const handleHome = (req, res) => {
			// console.log(res);
			// return res.end(); // ì„œë²„ê°€ responseë¥¼ ëëƒ„
			// return res.send("<h1>I wanna GO!!</h1>");
			return res.send({ message: "I wanna GO!!"});
		}

		const handleLogin = (req, res) => {
			return res.send("Login here.");
		}

		app.get("/", handleHome);
		app.get("/login", handleLogin);

8. middleware : requestì™€ response ì‚¬ì´ì— ì¡´ì¬
	handler, controller, mvc ë“±
	
	const handleHome = (req, res, next) => {
		// console.log(res);
		// return res.end(); // ì„œë²„ê°€ responseë¥¼ ëëƒ„
		// return res.send("<h1>I wanna GO!!</h1>");
		return res.send({ message: "I wanna GO!!"});
	}
	-> next ë§¤ê°œë³€ìˆ˜ëŠ” ë‹¤ìŒ í•¨ìˆ˜ë¥¼ í˜¸ì¶œ
	
	// application ì„¤ì •
	const handleHome = (req, res, next) => {
		// console.log(res);
		// return res.end(); // ì„œë²„ê°€ responseë¥¼ ëëƒ„
		// return res.send("<h1>I wanna GO!!</h1>");
		// return res.send({ message: "I wanna GO!!"});
		next();
	}
	-> í˜ì´ì§€ì— cannot GET / ëœ¸
	
9. app.use();
	- global middleware(ì–´ë–¤ URLì—ë„ ì‘ë™í•˜ëŠ”)ë¥¼ ë§Œë“¤ ìˆ˜ ìˆê²Œ í•´ì¤Œ.
	--------------------------------------------------------------------------------------------------------------
	- ìˆœì„œê°€ ì¤‘ìš”!! (use -> get)
	app.use(gossipMiddleware);
	app.get("/", handleHome);
	
	-> ì„¤ëª…ì€ server_desc.jsë¡œ í™•ì¸.
	-> ì§„ì§œ application ë§Œë“¤ê¸° -> server.jsë¶€í„° ì‹œì‘
		import express from "express";
		// create application
		const PORT = 4000;
		const app = express();

		// application ì„¤ì •
		// MW
		const logger = (req, res, next) => {
			// console.log("I'm in the middle!");
			// return res.send("I have the power now - middleware -"); // handleHomeìœ¼ë¡œ ë„˜ì–´ê°€ì§€ ì•ŠìŒ
			console.log(`${req.method} ${req.url}`); // req.url = ë£¨íŠ¸(/)
			next();
		}
		// MW
		const privateMiddleware = (req, res, next) => {
			const url = req.url;
			if(url === "/protected"){
				return res.send("<h1>Not Allowed</h1>");
			}
			console.log("Allowed, you may continue.");
			next();
		}

		const handleProtected = (req, res) => {
			return res.send("Welcome to the private Lounge.");
		}

		const handleHome = (req, res) => {
			// console.log(res);
			// return res.end(); // ì„œë²„ê°€ responseë¥¼ ëëƒ„
			// return res.send("<h1>I wanna GO!!</h1>");
			// return res.send({ message: "I wanna GO!!"});
			// return res.end();
			return res.send("I know middlewares");
			// next();
		}
		app.use(logger);
		app.use(privateMiddleware);
		app.get("/", handleHome);
		app.get("/protected", handleProtected);

		const handleLogin = (req, res) => {
			return res.send("Login here.");
		}
		app.get("/login", handleLogin);


		// ì™¸ë¶€ ì ‘ì† listen
		const handleListening = () => console.log(`âœ… Server listening on port http://localhost:${PORT} ğŸ¶`);
		app.listen(PORT, handleListening);
	--------------------------------------------------------------------------------------------------------------